---
import { publicAdsenseClientId } from "@/utils/constant"

interface Props {
  adSlot: string
}

const { adSlot } = Astro.props
---

<ins
  class="adsbygoogle manual-adsense h-auto w-screen min-w-full sm:w-full"
  style="display:block"
  data-ad-client={`ca-${publicAdsenseClientId || "pub-4946821479056257"}`}
  data-ad-slot={adSlot}
  data-ad-format="auto"
  data-full-width-responsive="true"></ins>
<script is:inline>
  ;(function () {
    let interacted = false
    const handleInteraction = () => {
      interacted = true
    }
    ;["click", "scroll", "keypress", "touchstart"].forEach((event) => {
      document.addEventListener(event, handleInteraction, { once: true })
    })

    setTimeout(() => {
      if (!interacted) {
        ;(adsbygoogle = window.adsbygoogle || []).push({})
      }
    }, 8000)

    if (interacted) {
      ;(adsbygoogle = window.adsbygoogle || []).push({})
    } else {
      document.addEventListener(
        "click",
        function loadAd() {
          ;(adsbygoogle = window.adsbygoogle || []).push({})
          document.removeEventListener("click", loadAd)
        },
        { once: true },
      )
    }
  })()
</script>
