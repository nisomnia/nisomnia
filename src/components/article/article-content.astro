---
import { Image } from "astro:assets"

import { parseContent, type ContentPart } from "@/utils/content-parser"

interface Props {
  article: {
    title: string
    content: string
  }
}

const { article } = Astro.props
const { title, content } = article

const contentParts: ContentPart[] = parseContent(content, title)
---

<div class="article-content">
  {
    contentParts.map((part) =>
      part.type === "html" ? (
        <Fragment set:html={part.content} />
      ) : (
        <Image
          src={part.src}
          alt={part.alt}
          inferSize
          quality={70}
          loading="lazy"
          sizes="(min-width: 640px) 720px, 250px"
          class="aspect-video w-full rounded object-cover"
        />
      ),
    )
  }
</div>
