---
import "@/styles/global.css"

import { Seo } from "astro-seo-meta"

import Sidebar from "@/components/layout/sidebar.astro"
import WebsiteSchema from "@/components/seo/website-schema.astro"
import Theme from "@/components/theme.astro"

import "@fontsource/inter"

import {
  publicLogoOgUrl,
  publicRobots,
  publicSiteDescription,
  publicSiteTitle,
  publicSiteUrl,
  publicXUsername,
} from "@/utils/constant"

interface Props {
  title?: string
  description?: string
  themeColor?: string
  robots?: string
}

const { title, description, themeColor, robots } = Astro.props

const pageTitle = title ? `${title} | ${publicSiteTitle}` : publicSiteTitle
const pageDescription = description ?? publicSiteDescription
const pageRobots = robots ?? publicRobots
---

<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width" />
    <meta name="generator" content={Astro.generator} />
    <Seo
      title={pageTitle}
      description={pageDescription}
      icon="/favicon.ico"
      themeColor={themeColor}
      robots={pageRobots}
      facebook={{
        image: publicLogoOgUrl,
        url: publicSiteUrl,
        type: "website",
      }}
      twitter={{
        image: publicLogoOgUrl,
        site: `@${publicXUsername}`,
        card: "summary",
      }}
    />
    <Theme />
  </head>
  <body
    class="mx-4 mt-8 mb-40 flex max-w-4xl flex-col gap-4 font-sans antialiased md:mt-20 md:flex-row md:gap-8 lg:mx-auto lg:mt-32"
  >
    <Sidebar />
    <main class="mt-6 flex min-w-0 flex-auto flex-col px-2 md:mt-0 md:px-0">
      <slot />
    </main>
    <WebsiteSchema />
  </body>
</html>
